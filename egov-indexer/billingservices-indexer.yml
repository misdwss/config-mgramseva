ServiceMaps:
 serviceName: Billing Service
 version: 1.0.0
 mappings:
  - topic: create-demand-index
    configKey: INDEX
    indexes:
    - name: demandindex-v1
      type: demands
      id: $.id, $.tenantId
      isBulk: true
      jsonPath: $.Demands.*
      timeStampField: $.auditDetails.createdTime
      customJsonMapping:
        indexMapping: { "Data": { } }
        fieldMapping:
          - inJsonPath: $
            outJsonPath: $.Data

  - topic: update-demand-index
    configKey: INDEX
    indexes:
      - name: demandindex-v1
        type: demands
        id: $.id, $.tenantId
        isBulk: true
        jsonPath: $.Demands.*
        timeStampField: $.auditDetails.lastModifiedTime
        customJsonMapping:
          indexMapping: { "Data": { } }
          fieldMapping:
            - inJsonPath: $
              outJsonPath: $.Data

  - topic: demand-reindex
    configKey: REINDEX
    indexes:
    - name: demandindex-v1
      type: demand
      id: $.id, $.tenantId
      isBulk: true
      jsonPath: $.hits
      timeStampField: $.auditDetail.createdTime

